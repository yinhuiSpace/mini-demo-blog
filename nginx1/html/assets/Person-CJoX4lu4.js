import{d as P,e as u,c as b,h as e,b as a,w as t,F as $,a as y,m as q,E as p,r as o,n as z,o as f,t as i,k as m,p as A,j as C,u as M,s as G}from"./index-D4dsPctk.js";const H={class:"columns",style:{"margin-top":"10px"}},J={class:"el-header has-text-centered"},K={class:"block"},L={class:"el-header has-text-centered has-text-weight-bold"},O={class:"mt-3"},Q={class:"has-text-centered"},R={class:""},W=e("p",{class:"content"},[m(" 积分： "),e("code",null," 100 ")],-1),X={class:"content"},Y={class:"content"},Z={style:{flex:"45",display:"flex","align-items":"center","justify-content":"center"}},ee=["src"],ae={class:"dialog-footer"},le=P({__name:"Person",setup(te){const n=u({}),r=u(!1),_=u(!1),x=()=>{y.get("/user-service/info",{params:{id:q().userInfo.id}}).then(s=>{s.data.isSuccess?(n.value=s.data.content,c.value.id=n.value.id):p.error(s.data.message)})};x();const h=u(""),F=s=>{r.value=!0;const l=new FormData;l.append("img",s.file),y.post("/user-service/user/upload",l).then(d=>{d.data.isSuccess?(h.value=d.data.content,c.value.avatar=d.data.content,p.success("上传成功"),r.value=!1):(p.error(d.data.message),r.value=!1)})},S=u({"Content-Type":"multipart/form-data"}),c=u({avatar:"",gender:"",id:""}),D=()=>{r.value=!0,y.put("/user-service/user/update",c.value).then(s=>{s.data.isSuccess?(r.value=!1,p.success("更新成功"),_.value=!1,x()):(p.error(s.data.message),r.value=!1)})};return(s,l)=>{const d=o("el-avatar"),w=o("el-divider"),g=o("el-button"),U=o("el-card"),k=o("el-radio"),B=o("el-radio-group"),V=o("el-form-item"),E=o("el-icon"),I=o("el-upload"),N=o("el-form"),T=o("el-dialog"),j=z("loading");return f(),b($,null,[e("div",H,[a(U,{class:"column",style:{"max-width":"60vw",margin:"auto"}},{default:t(()=>[e("div",J,[e("div",K,[a(d,{fit:"cover",size:60,src:n.value.avatar,style:{border:"solid #F0F0F2 2px"}},null,8,["src"])])]),e("div",L,[e("p",O,i(n.value.username),1)]),e("div",null,[e("p",Q,[e("div",R,[e("span",null," 文章："+i(n.value.articles),1),a(w,{direction:"vertical"}),e("span",null," 粉丝："+i(n.value.fans),1),a(w,{direction:"vertical"}),e("span",null," 关注："+i(n.value.followers),1)])]),W,e("p",X," 入驻时间："+i(n.value.createTime),1),e("p",Y," 性别："+i(n.value.gender==0?"男":"女"),1),a(g,{type:"primary",icon:"Edit",circle:"",onClick:l[0]||(l[0]=v=>_.value=!0)})])]),_:1})]),a(T,{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=v=>_.value=v),title:"修改信息",width:"500","align-center":""},{footer:t(()=>[e("div",ae,[a(g,{onClick:l[2]||(l[2]=v=>_.value=!1)},{default:t(()=>[m("取消")]),_:1}),a(g,{type:"primary",onClick:D},{default:t(()=>[m(" 保存 ")]),_:1})])]),default:t(()=>[e("div",Z,[A((f(),C(N,{ref:"formInstance",model:c.value,style:{width:"80%"},rules:s.rules},{default:t(()=>[a(V,{prop:"gender",label:"性别"},{default:t(()=>[a(B,{modelValue:c.value.gender,"onUpdate:modelValue":l[1]||(l[1]=v=>c.value.gender=v)},{default:t(()=>[a(k,{value:0},{default:t(()=>[m("男")]),_:1}),a(k,{value:1},{default:t(()=>[m("女")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(V,{prop:"avatar",label:"头像"},{default:t(()=>[a(I,{class:"avatar-uploader",action:"","show-file-list":!1,"on-success":s.handleAvatarSuccess,"http-request":F,headers:S.value},{default:t(()=>[h.value?(f(),b("img",{key:0,src:h.value,class:"avatar",alt:""},null,8,ee)):(f(),C(E,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[a(M(G))]),_:1}))]),_:1},8,["on-success","headers"])]),_:1})]),_:1},8,["model","rules"])),[[j,r.value]])])]),_:1},8,["modelValue"])],64)}}});export{le as default};
