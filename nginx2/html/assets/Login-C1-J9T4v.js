import{a as V}from"./index-BgbCg4-D.js";import{u}from"./user-DyNFqZc8.js";import{d as C,r as c,g as k,e,f as b,c as B,w as n,a as d,q,o as v,b as s,i as _,E as p,C as I}from"./index-DhBAbreQ.js";const U="/assets/llogin-Bh1b6w7V.png",E={style:{height:"100vh",display:"flex","align-items":"center","justify-content":"center","background-color":"#0f9876"}},N={style:{display:"flex","background-color":"white",width:"55%",height:"45vh","border-radius":"5px",overflow:"hidden"}},j=e("div",{style:{flex:"55"}},[e("img",{src:U,alt:"",style:{height:"100%"}})],-1),D={style:{flex:"45",display:"flex","align-items":"center","justify-content":"center"}},L=e("div",{style:{"font-size":"20px","font-weight":"bold","text-align":"center"}},"欢迎登录后台管理系统",-1),S={style:{display:"flex",width:"100%"}},z=e("div",{style:{flex:"1"}},null,-1),F=e("div",{style:{display:"flex"}},[e("div",{style:{flex:"1"}},[_(" 还没有账号?请 "),e("span",{style:{color:"#0f9876",cursor:"pointer"}}," 注册 ")]),e("div",{style:{flex:"1","text-align":"right"}},[e("span",{style:{color:"#0f9876",cursor:"pointer"}}," 忘记密码 ")])],-1),G=C({__name:"Login",setup(M){const o=c({username:"",password:"",validCode:""}),r=c(!1),g={username:[{required:!0,message:"账号名不能为空",trigger:"change"}],password:[{required:!0,message:"密码不能为空",trigger:"change"}],validCode:[{required:!0,message:"验证码不能为空",trigger:"change"}]},h=m=>{r.value=!0,u().removeLogin(),m.validate(t=>{t?V.post("/auth-service/manager/login",o.value).then(l=>{l.data.isSuccess?(u().token=l.data.content.token,u().userInfo=l.data.content.infoVo,p.success("登录成功"),r.value=!1,I.replace({path:"/"})):(p.error(l.data.message),r.value=!1)}):(p.error("请按要求填写信息"),r.value=!1)})},f=c();return(m,t)=>{const l=d("el-input"),i=d("el-form-item"),y=d("el-button"),x=d("el-form"),w=q("loading");return v(),k("div",E,[e("div",N,[j,e("div",D,[b((v(),B(x,{ref_key:"formInstance",ref:f,model:o.value,style:{width:"80%"},rules:g},{default:n(()=>[L,s(i,{prop:"username"},{default:n(()=>[s(l,{placeholder:"请输入账号",type:"text",autocomplete:"off",modelValue:o.value.username,"onUpdate:modelValue":t[0]||(t[0]=a=>o.value.username=a),"prefix-icon":"user"},null,8,["modelValue"])]),_:1}),s(i,{prop:"password"},{default:n(()=>[s(l,{placeholder:"请输入密码",type:"password",autocomplete:"off","show-password":"",modelValue:o.value.password,"onUpdate:modelValue":t[1]||(t[1]=a=>o.value.password=a),"prefix-icon":"lock"},null,8,["modelValue"])]),_:1}),s(i,{prop:"validCode"},{default:n(()=>[e("div",S,[s(l,{style:{flex:"1"},modelValue:o.value.validCode,"onUpdate:modelValue":t[2]||(t[2]=a=>o.value.validCode=a),type:"text","prefix-icon":"CircleCheck"},null,8,["modelValue"]),z])]),_:1}),s(i,null,{default:n(()=>[s(y,{type:"primary",style:{width:"100%"},onClick:t[3]||(t[3]=a=>h(f.value))},{default:n(()=>[_(" 登 录 ")]),_:1})]),_:1}),F]),_:1},8,["model"])),[[w,r.value]])])])])}}});export{G as default};
